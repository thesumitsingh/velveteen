
  
<!DOCTYPE html>
<html>
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-01RXD39C1C"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-01RXD39C1C');
</script> 
<link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <meta name="theme-color" content="#000" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
</head>
<body style="background-color: #000;">


    
    <center>

     <div id="memeList"></div>
     
     <button type="button" style="left:1%;right: 1%;width:98%;position: fixed;bottom: 15px;z-index: 30;height: 65px;" class="btn btn-primary btn-lg btn-block" onclick='nextButtonClick();'>Next-></button>
     

     <p style="color: gray;"><a href="https://forms.gle/ituZ7UWhsMtVkZGU7">Click here to Submit content/Contact</a> </p><br><br><br>
     </center>
<script async src="https://www.instagram.com/embed.js"></script>
<script>
    var jsondata = "",offset=0;
    let apiUrl = "https://hxgvmajkkzdwqpzugzmc.supabase.co/rest/v1/crash9?select=*&"
    var shown=1;


function getRandomInt() {
    min = Math.ceil(1);
    max = Math.floor(8679);
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

async function getJson(url) {
        let n1=getRandomInt();
        let n2=getRandomInt();
        let n3=getRandomInt();
        let n4=getRandomInt();
        let n5=getRandomInt();
        let n6=getRandomInt();
        let n7=getRandomInt();
        let n8=getRandomInt();
        let n9=getRandomInt();
        let n10=getRandomInt();
        let n11=getRandomInt();
        let n12=getRandomInt();
        let n13=getRandomInt();
        let n14=getRandomInt();
        let n15=getRandomInt();
        let n16=getRandomInt();
        let n17=getRandomInt();
        let n18=getRandomInt();
        let n19=getRandomInt();
        let n20=getRandomInt();
        let inString="&snumber=in.("+n1+","+n2+","+n3+","+n4+","+n5+","+n6+","+n7+","+n8+","+n9+","+n10+","+n11+","+n12+","+n13+","+n14+","+n15+","+n16+","+n17+","+n18+","+n19+","+n20+")";
        let response = await fetch (apiUrl+inString, {
            method: "GET",
            headers: {"Content-type": "application/json;charset=UTF-8", "apikey":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzNzMyNjkwMCwiZXhwIjoxOTUyOTAyOTAwfQ.abCfCoAbL2gG2kYcZbbw3NIq57DLtjd_qvBBR1NEzaw"}
        });
        console.log("api has been called");
        let data = await response.text();
        data=JSON.parse(data);
        return data;

        // return fetch (apiUrl+inString, {
        //     method: "GET",
        //     headers: {"Content-type": "application/json;charset=UTF-8", "apikey":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzNzMyNjkwMCwiZXhwIjoxOTUyOTAyOTAwfQ.abCfCoAbL2gG2kYcZbbw3NIq57DLtjd_qvBBR1NEzaw"}
        // })
        // .then((response)=>response.json())
        // .then((responseJson)=>{return responseJson});
}
var total=0;
var count =0;
async function main() {
    document.getElementById("memeList").innerHTML="<h1><br><br>Loading...</h1><br>If it takes too long, please refresh this page or contact the admin using link below.";
    jsondata = await getJson(apiUrl);
    console.log("main has been called");
    console.log(jsondata);
    count = Object.keys(jsondata).length;

    // jsondata=JSON.parse(jsondata);
    var memeHtml="";
    for (var i=0;i<count;i++){
        if (jsondata[i]['is_deleted']==1){
            console.log("this one was already deleted");
            continue;
        }
        total++;
        console.log("for "+ total+" "+jsondata['snumber'])
        memeHtml+='<div id="demodiv'+total+'" class="embedparentclass" style="background-color: #000;display:none;overflow: hidden;pointer-events: none;"><div class="embedtopblocker" style="color:#000;height:55px;position:absolute;z-index:20;background-color:#000;width:100%;"></div><div style="pointer-events:none;"><blockquote class="instagram-media" data-instgrm-permalink="'+jsondata[i]['postUrl']+'?utm_source=ig_embed&amp;utm_campaign=loading" data-instgrm-version="14" style="z-index:5;overflow:hidden;background:#FFF; border:0; border-radius:30px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px;width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);">Loading...</blockquote></div>'+'<div class="embedbottomblocker" style="margin-top: -164px;height: 164px; color:#fff;position:absolute;z-index:20;background-color:#000;width:100%;"><br><button class="btn btn-light" >'+Math.round(jsondata[i]['likeCount']/1000)*1000+'+ likes</button>&nbsp;&nbsp;<button class="btn btn-light" type="button" onclick="window.open(\''+jsondata[i]['postUrl']+'\');" target="_blank">source</button><br><br><h2 style="align-content: center;font-family: \'Sacramento\', cursive;color: #1e73be;">_____ Velveteen _____</h2><hr></div></div>';

    }
    document.getElementById("memeList").innerHTML=memeHtml;
    if ( typeof window.instgrm !== 'undefined' ) {
    window.instgrm.Embeds.process();
}
if (shown==1){
    document.getElementById("demodiv"+1).style.cssText="display:block;overflow: hidden;";
}
}
function delete_record(snumber){
    console.log("delete has been called");

    let response =  fetch ("https://hxgvmajkkzdwqpzugzmc.supabase.co/rest/v1/crash9?snumber=eq."+snumber, {
            method: "PATCH",
            headers: {"Content-type": "application/json", "apikey":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNjM3MzI2OTAwLCJleHAiOjE5NTI5MDI5MDB9.uPwHcprY_lppREltsxHZj7C3IKML1qZz5nmd0VHxyaY", "Prefer": "return=representation","Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNjM3MzI2OTAwLCJleHAiOjE5NTI5MDI5MDB9.uPwHcprY_lppREltsxHZj7C3IKML1qZz5nmd0VHxyaY"},
            body: JSON.stringify({ "is_deleted": "1" }),
        });
}

// document.getElementById("demodiv"+shown).style.cssText="display:block;";
function nextButtonClick(){
    
    try {
    // code that we will 'try' to run
    document.getElementById("demodiv"+shown).style.cssText="display:none;overflow: hidden;pointer-events: none;";
    shown++;
    if (shown>count){
        location.reload();
        return;
    }
    document.getElementById("demodiv"+shown).style.cssText="display:block;overflow: hidden;";
    console.log(shown);
    } catch(error) {
    // code to run if there are any problems
    console.log(error.response)
    location.reload();
    }
}


main();    



</script>
<script>
    if ('serviceWorker' in navigator) {
       console.log("Will the service worker register?");
       navigator.serviceWorker.register('service-worker.js')
         .then(function(reg){
           console.log("Yes, it did.");
        }).catch(function(err) {
           console.log("No it didn't. This happened:", err)
       });
    }
   </script>
</body>
</html>


